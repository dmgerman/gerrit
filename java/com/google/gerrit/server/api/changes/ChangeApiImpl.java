begin_unit|revision:0.9.5;language:Java;cregit-version:0.0.1
begin_comment
comment|// Copyright (C) 2013 The Android Open Source Project
end_comment

begin_comment
comment|//
end_comment

begin_comment
comment|// Licensed under the Apache License, Version 2.0 (the "License");
end_comment

begin_comment
comment|// you may not use this file except in compliance with the License.
end_comment

begin_comment
comment|// You may obtain a copy of the License at
end_comment

begin_comment
comment|//
end_comment

begin_comment
comment|// http://www.apache.org/licenses/LICENSE-2.0
end_comment

begin_comment
comment|//
end_comment

begin_comment
comment|// Unless required by applicable law or agreed to in writing, software
end_comment

begin_comment
comment|// distributed under the License is distributed on an "AS IS" BASIS,
end_comment

begin_comment
comment|// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
end_comment

begin_comment
comment|// See the License for the specific language governing permissions and
end_comment

begin_comment
comment|// limitations under the License.
end_comment

begin_package
DECL|package|com.google.gerrit.server.api.changes
package|package
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|api
operator|.
name|changes
package|;
end_package

begin_import
import|import static
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|api
operator|.
name|ApiUtil
operator|.
name|asRestApiException
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|common
operator|.
name|collect
operator|.
name|ImmutableListMultimap
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|common
operator|.
name|collect
operator|.
name|ListMultimap
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|common
operator|.
name|Nullable
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|exceptions
operator|.
name|StorageException
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|AbandonInput
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|AddReviewerInput
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|AddReviewerResult
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|AssigneeInput
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|ChangeApi
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|ChangeEditApi
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|ChangeMessageApi
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|Changes
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|FixInput
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|HashtagsInput
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|IncludedInInfo
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|MoveInput
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|RebaseInput
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|RestoreInput
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|RevertInput
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|ReviewerApi
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|ReviewerInfo
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|RevisionApi
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|SubmittedTogetherInfo
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|SubmittedTogetherOption
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|TopicInput
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|client
operator|.
name|ListChangesOption
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|common
operator|.
name|AccountInfo
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|common
operator|.
name|ChangeInfo
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|common
operator|.
name|ChangeMessageInfo
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|common
operator|.
name|CommentInfo
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|common
operator|.
name|CommitMessageInput
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|common
operator|.
name|Input
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|common
operator|.
name|InputWithMessage
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|common
operator|.
name|MergePatchSetInput
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|common
operator|.
name|PureRevertInfo
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|common
operator|.
name|RevertSubmissionInfo
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|common
operator|.
name|RobotCommentInfo
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|common
operator|.
name|SuggestedReviewerInfo
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|registration
operator|.
name|DynamicMap
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|restapi
operator|.
name|BadRequestException
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|restapi
operator|.
name|IdString
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|restapi
operator|.
name|Response
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|restapi
operator|.
name|RestApiException
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|DynamicOptions
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|StarredChangesUtil
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|StarredChangesUtil
operator|.
name|IllegalLabelException
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|change
operator|.
name|ChangeMessageResource
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|change
operator|.
name|ChangeResource
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|change
operator|.
name|WorkInProgressOp
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|Abandon
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|ChangeIncludedIn
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|ChangeMessages
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|Check
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|CreateMergePatchSet
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|DeleteAssignee
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|DeleteChange
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|DeletePrivate
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|GetAssignee
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|GetChange
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|GetHashtags
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|GetPastAssignees
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|GetPureRevert
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|GetTopic
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|Ignore
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|Index
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|ListChangeComments
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|ListChangeDrafts
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|ListChangeRobotComments
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|ListReviewers
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|MarkAsReviewed
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|MarkAsUnreviewed
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|Move
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|PostHashtags
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|PostPrivate
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|PostReviewers
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|PutAssignee
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|PutMessage
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|PutTopic
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|Rebase
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|Restore
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|Revert
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|RevertSubmission
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|Reviewers
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|Revisions
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|SetReadyForReview
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|SetWorkInProgress
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|SubmittedTogether
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|SuggestChangeReviewers
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|Unignore
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|util
operator|.
name|cli
operator|.
name|CmdLineParser
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|inject
operator|.
name|Inject
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|inject
operator|.
name|Injector
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|inject
operator|.
name|Provider
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|inject
operator|.
name|Singleton
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|inject
operator|.
name|assistedinject
operator|.
name|Assisted
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|EnumSet
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|List
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Map
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Set
import|;
end_import

begin_import
import|import
name|org
operator|.
name|kohsuke
operator|.
name|args4j
operator|.
name|CmdLineException
import|;
end_import

begin_class
DECL|class|ChangeApiImpl
class|class
name|ChangeApiImpl
implements|implements
name|ChangeApi
block|{
DECL|interface|Factory
interface|interface
name|Factory
block|{
DECL|method|create (ChangeResource change)
name|ChangeApiImpl
name|create
parameter_list|(
name|ChangeResource
name|change
parameter_list|)
function_decl|;
block|}
DECL|field|changeApi
specifier|private
specifier|final
name|Changes
name|changeApi
decl_stmt|;
DECL|field|reviewers
specifier|private
specifier|final
name|Reviewers
name|reviewers
decl_stmt|;
DECL|field|revisions
specifier|private
specifier|final
name|Revisions
name|revisions
decl_stmt|;
DECL|field|reviewerApi
specifier|private
specifier|final
name|ReviewerApiImpl
operator|.
name|Factory
name|reviewerApi
decl_stmt|;
DECL|field|revisionApi
specifier|private
specifier|final
name|RevisionApiImpl
operator|.
name|Factory
name|revisionApi
decl_stmt|;
DECL|field|changeMessageApi
specifier|private
specifier|final
name|ChangeMessageApiImpl
operator|.
name|Factory
name|changeMessageApi
decl_stmt|;
DECL|field|changeMessages
specifier|private
specifier|final
name|ChangeMessages
name|changeMessages
decl_stmt|;
DECL|field|suggestReviewers
specifier|private
specifier|final
name|SuggestChangeReviewers
name|suggestReviewers
decl_stmt|;
DECL|field|listReviewers
specifier|private
specifier|final
name|ListReviewers
name|listReviewers
decl_stmt|;
DECL|field|change
specifier|private
specifier|final
name|ChangeResource
name|change
decl_stmt|;
DECL|field|abandon
specifier|private
specifier|final
name|Abandon
name|abandon
decl_stmt|;
DECL|field|revert
specifier|private
specifier|final
name|Revert
name|revert
decl_stmt|;
DECL|field|revertSubmission
specifier|private
specifier|final
name|RevertSubmission
name|revertSubmission
decl_stmt|;
DECL|field|restore
specifier|private
specifier|final
name|Restore
name|restore
decl_stmt|;
DECL|field|updateByMerge
specifier|private
specifier|final
name|CreateMergePatchSet
name|updateByMerge
decl_stmt|;
DECL|field|submittedTogether
specifier|private
specifier|final
name|Provider
argument_list|<
name|SubmittedTogether
argument_list|>
name|submittedTogether
decl_stmt|;
DECL|field|rebase
specifier|private
specifier|final
name|Rebase
operator|.
name|CurrentRevision
name|rebase
decl_stmt|;
DECL|field|deleteChange
specifier|private
specifier|final
name|DeleteChange
name|deleteChange
decl_stmt|;
DECL|field|getTopic
specifier|private
specifier|final
name|GetTopic
name|getTopic
decl_stmt|;
DECL|field|putTopic
specifier|private
specifier|final
name|PutTopic
name|putTopic
decl_stmt|;
DECL|field|includedIn
specifier|private
specifier|final
name|ChangeIncludedIn
name|includedIn
decl_stmt|;
DECL|field|postReviewers
specifier|private
specifier|final
name|PostReviewers
name|postReviewers
decl_stmt|;
DECL|field|getChangeProvider
specifier|private
specifier|final
name|Provider
argument_list|<
name|GetChange
argument_list|>
name|getChangeProvider
decl_stmt|;
DECL|field|postHashtags
specifier|private
specifier|final
name|PostHashtags
name|postHashtags
decl_stmt|;
DECL|field|getHashtags
specifier|private
specifier|final
name|GetHashtags
name|getHashtags
decl_stmt|;
DECL|field|putAssignee
specifier|private
specifier|final
name|PutAssignee
name|putAssignee
decl_stmt|;
DECL|field|getAssignee
specifier|private
specifier|final
name|GetAssignee
name|getAssignee
decl_stmt|;
DECL|field|getPastAssignees
specifier|private
specifier|final
name|GetPastAssignees
name|getPastAssignees
decl_stmt|;
DECL|field|deleteAssignee
specifier|private
specifier|final
name|DeleteAssignee
name|deleteAssignee
decl_stmt|;
DECL|field|listComments
specifier|private
specifier|final
name|ListChangeComments
name|listComments
decl_stmt|;
DECL|field|listChangeRobotComments
specifier|private
specifier|final
name|ListChangeRobotComments
name|listChangeRobotComments
decl_stmt|;
DECL|field|listDrafts
specifier|private
specifier|final
name|ListChangeDrafts
name|listDrafts
decl_stmt|;
DECL|field|changeEditApi
specifier|private
specifier|final
name|ChangeEditApiImpl
operator|.
name|Factory
name|changeEditApi
decl_stmt|;
DECL|field|check
specifier|private
specifier|final
name|Check
name|check
decl_stmt|;
DECL|field|index
specifier|private
specifier|final
name|Index
name|index
decl_stmt|;
DECL|field|move
specifier|private
specifier|final
name|Move
name|move
decl_stmt|;
DECL|field|postPrivate
specifier|private
specifier|final
name|PostPrivate
name|postPrivate
decl_stmt|;
DECL|field|deletePrivate
specifier|private
specifier|final
name|DeletePrivate
name|deletePrivate
decl_stmt|;
DECL|field|ignore
specifier|private
specifier|final
name|Ignore
name|ignore
decl_stmt|;
DECL|field|unignore
specifier|private
specifier|final
name|Unignore
name|unignore
decl_stmt|;
DECL|field|markAsReviewed
specifier|private
specifier|final
name|MarkAsReviewed
name|markAsReviewed
decl_stmt|;
DECL|field|markAsUnreviewed
specifier|private
specifier|final
name|MarkAsUnreviewed
name|markAsUnreviewed
decl_stmt|;
DECL|field|setWip
specifier|private
specifier|final
name|SetWorkInProgress
name|setWip
decl_stmt|;
DECL|field|setReady
specifier|private
specifier|final
name|SetReadyForReview
name|setReady
decl_stmt|;
DECL|field|putMessage
specifier|private
specifier|final
name|PutMessage
name|putMessage
decl_stmt|;
DECL|field|getPureRevertProvider
specifier|private
specifier|final
name|Provider
argument_list|<
name|GetPureRevert
argument_list|>
name|getPureRevertProvider
decl_stmt|;
DECL|field|stars
specifier|private
specifier|final
name|StarredChangesUtil
name|stars
decl_stmt|;
DECL|field|dynamicOptionParser
specifier|private
specifier|final
name|DynamicOptionParser
name|dynamicOptionParser
decl_stmt|;
annotation|@
name|Inject
DECL|method|ChangeApiImpl ( Changes changeApi, Reviewers reviewers, Revisions revisions, ReviewerApiImpl.Factory reviewerApi, RevisionApiImpl.Factory revisionApi, ChangeMessageApiImpl.Factory changeMessageApi, ChangeMessages changeMessages, SuggestChangeReviewers suggestReviewers, ListReviewers listReviewers, Abandon abandon, Revert revert, RevertSubmission revertSubmission, Restore restore, CreateMergePatchSet updateByMerge, Provider<SubmittedTogether> submittedTogether, Rebase.CurrentRevision rebase, DeleteChange deleteChange, GetTopic getTopic, PutTopic putTopic, ChangeIncludedIn includedIn, PostReviewers postReviewers, Provider<GetChange> getChangeProvider, PostHashtags postHashtags, GetHashtags getHashtags, PutAssignee putAssignee, GetAssignee getAssignee, GetPastAssignees getPastAssignees, DeleteAssignee deleteAssignee, ListChangeComments listComments, ListChangeRobotComments listChangeRobotComments, ListChangeDrafts listDrafts, ChangeEditApiImpl.Factory changeEditApi, Check check, Index index, Move move, PostPrivate postPrivate, DeletePrivate deletePrivate, Ignore ignore, Unignore unignore, MarkAsReviewed markAsReviewed, MarkAsUnreviewed markAsUnreviewed, SetWorkInProgress setWip, SetReadyForReview setReady, PutMessage putMessage, Provider<GetPureRevert> getPureRevertProvider, StarredChangesUtil stars, DynamicOptionParser dynamicOptionParser, @Assisted ChangeResource change)
name|ChangeApiImpl
parameter_list|(
name|Changes
name|changeApi
parameter_list|,
name|Reviewers
name|reviewers
parameter_list|,
name|Revisions
name|revisions
parameter_list|,
name|ReviewerApiImpl
operator|.
name|Factory
name|reviewerApi
parameter_list|,
name|RevisionApiImpl
operator|.
name|Factory
name|revisionApi
parameter_list|,
name|ChangeMessageApiImpl
operator|.
name|Factory
name|changeMessageApi
parameter_list|,
name|ChangeMessages
name|changeMessages
parameter_list|,
name|SuggestChangeReviewers
name|suggestReviewers
parameter_list|,
name|ListReviewers
name|listReviewers
parameter_list|,
name|Abandon
name|abandon
parameter_list|,
name|Revert
name|revert
parameter_list|,
name|RevertSubmission
name|revertSubmission
parameter_list|,
name|Restore
name|restore
parameter_list|,
name|CreateMergePatchSet
name|updateByMerge
parameter_list|,
name|Provider
argument_list|<
name|SubmittedTogether
argument_list|>
name|submittedTogether
parameter_list|,
name|Rebase
operator|.
name|CurrentRevision
name|rebase
parameter_list|,
name|DeleteChange
name|deleteChange
parameter_list|,
name|GetTopic
name|getTopic
parameter_list|,
name|PutTopic
name|putTopic
parameter_list|,
name|ChangeIncludedIn
name|includedIn
parameter_list|,
name|PostReviewers
name|postReviewers
parameter_list|,
name|Provider
argument_list|<
name|GetChange
argument_list|>
name|getChangeProvider
parameter_list|,
name|PostHashtags
name|postHashtags
parameter_list|,
name|GetHashtags
name|getHashtags
parameter_list|,
name|PutAssignee
name|putAssignee
parameter_list|,
name|GetAssignee
name|getAssignee
parameter_list|,
name|GetPastAssignees
name|getPastAssignees
parameter_list|,
name|DeleteAssignee
name|deleteAssignee
parameter_list|,
name|ListChangeComments
name|listComments
parameter_list|,
name|ListChangeRobotComments
name|listChangeRobotComments
parameter_list|,
name|ListChangeDrafts
name|listDrafts
parameter_list|,
name|ChangeEditApiImpl
operator|.
name|Factory
name|changeEditApi
parameter_list|,
name|Check
name|check
parameter_list|,
name|Index
name|index
parameter_list|,
name|Move
name|move
parameter_list|,
name|PostPrivate
name|postPrivate
parameter_list|,
name|DeletePrivate
name|deletePrivate
parameter_list|,
name|Ignore
name|ignore
parameter_list|,
name|Unignore
name|unignore
parameter_list|,
name|MarkAsReviewed
name|markAsReviewed
parameter_list|,
name|MarkAsUnreviewed
name|markAsUnreviewed
parameter_list|,
name|SetWorkInProgress
name|setWip
parameter_list|,
name|SetReadyForReview
name|setReady
parameter_list|,
name|PutMessage
name|putMessage
parameter_list|,
name|Provider
argument_list|<
name|GetPureRevert
argument_list|>
name|getPureRevertProvider
parameter_list|,
name|StarredChangesUtil
name|stars
parameter_list|,
name|DynamicOptionParser
name|dynamicOptionParser
parameter_list|,
annotation|@
name|Assisted
name|ChangeResource
name|change
parameter_list|)
block|{
name|this
operator|.
name|changeApi
operator|=
name|changeApi
expr_stmt|;
name|this
operator|.
name|revert
operator|=
name|revert
expr_stmt|;
name|this
operator|.
name|revertSubmission
operator|=
name|revertSubmission
expr_stmt|;
name|this
operator|.
name|reviewers
operator|=
name|reviewers
expr_stmt|;
name|this
operator|.
name|revisions
operator|=
name|revisions
expr_stmt|;
name|this
operator|.
name|reviewerApi
operator|=
name|reviewerApi
expr_stmt|;
name|this
operator|.
name|revisionApi
operator|=
name|revisionApi
expr_stmt|;
name|this
operator|.
name|changeMessageApi
operator|=
name|changeMessageApi
expr_stmt|;
name|this
operator|.
name|changeMessages
operator|=
name|changeMessages
expr_stmt|;
name|this
operator|.
name|suggestReviewers
operator|=
name|suggestReviewers
expr_stmt|;
name|this
operator|.
name|listReviewers
operator|=
name|listReviewers
expr_stmt|;
name|this
operator|.
name|abandon
operator|=
name|abandon
expr_stmt|;
name|this
operator|.
name|restore
operator|=
name|restore
expr_stmt|;
name|this
operator|.
name|updateByMerge
operator|=
name|updateByMerge
expr_stmt|;
name|this
operator|.
name|submittedTogether
operator|=
name|submittedTogether
expr_stmt|;
name|this
operator|.
name|rebase
operator|=
name|rebase
expr_stmt|;
name|this
operator|.
name|deleteChange
operator|=
name|deleteChange
expr_stmt|;
name|this
operator|.
name|getTopic
operator|=
name|getTopic
expr_stmt|;
name|this
operator|.
name|putTopic
operator|=
name|putTopic
expr_stmt|;
name|this
operator|.
name|includedIn
operator|=
name|includedIn
expr_stmt|;
name|this
operator|.
name|postReviewers
operator|=
name|postReviewers
expr_stmt|;
name|this
operator|.
name|getChangeProvider
operator|=
name|getChangeProvider
expr_stmt|;
name|this
operator|.
name|postHashtags
operator|=
name|postHashtags
expr_stmt|;
name|this
operator|.
name|getHashtags
operator|=
name|getHashtags
expr_stmt|;
name|this
operator|.
name|putAssignee
operator|=
name|putAssignee
expr_stmt|;
name|this
operator|.
name|getAssignee
operator|=
name|getAssignee
expr_stmt|;
name|this
operator|.
name|getPastAssignees
operator|=
name|getPastAssignees
expr_stmt|;
name|this
operator|.
name|deleteAssignee
operator|=
name|deleteAssignee
expr_stmt|;
name|this
operator|.
name|listComments
operator|=
name|listComments
expr_stmt|;
name|this
operator|.
name|listChangeRobotComments
operator|=
name|listChangeRobotComments
expr_stmt|;
name|this
operator|.
name|listDrafts
operator|=
name|listDrafts
expr_stmt|;
name|this
operator|.
name|changeEditApi
operator|=
name|changeEditApi
expr_stmt|;
name|this
operator|.
name|check
operator|=
name|check
expr_stmt|;
name|this
operator|.
name|index
operator|=
name|index
expr_stmt|;
name|this
operator|.
name|move
operator|=
name|move
expr_stmt|;
name|this
operator|.
name|postPrivate
operator|=
name|postPrivate
expr_stmt|;
name|this
operator|.
name|deletePrivate
operator|=
name|deletePrivate
expr_stmt|;
name|this
operator|.
name|ignore
operator|=
name|ignore
expr_stmt|;
name|this
operator|.
name|unignore
operator|=
name|unignore
expr_stmt|;
name|this
operator|.
name|markAsReviewed
operator|=
name|markAsReviewed
expr_stmt|;
name|this
operator|.
name|markAsUnreviewed
operator|=
name|markAsUnreviewed
expr_stmt|;
name|this
operator|.
name|setWip
operator|=
name|setWip
expr_stmt|;
name|this
operator|.
name|setReady
operator|=
name|setReady
expr_stmt|;
name|this
operator|.
name|putMessage
operator|=
name|putMessage
expr_stmt|;
name|this
operator|.
name|getPureRevertProvider
operator|=
name|getPureRevertProvider
expr_stmt|;
name|this
operator|.
name|stars
operator|=
name|stars
expr_stmt|;
name|this
operator|.
name|dynamicOptionParser
operator|=
name|dynamicOptionParser
expr_stmt|;
name|this
operator|.
name|change
operator|=
name|change
expr_stmt|;
block|}
annotation|@
name|Override
DECL|method|id ()
specifier|public
name|String
name|id
parameter_list|()
block|{
return|return
name|Integer
operator|.
name|toString
argument_list|(
name|change
operator|.
name|getId
argument_list|()
operator|.
name|get
argument_list|()
argument_list|)
return|;
block|}
annotation|@
name|Override
DECL|method|revision (String id)
specifier|public
name|RevisionApi
name|revision
parameter_list|(
name|String
name|id
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|revisionApi
operator|.
name|create
argument_list|(
name|revisions
operator|.
name|parse
argument_list|(
name|change
argument_list|,
name|IdString
operator|.
name|fromDecoded
argument_list|(
name|id
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot parse revision"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|reviewer (String id)
specifier|public
name|ReviewerApi
name|reviewer
parameter_list|(
name|String
name|id
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|reviewerApi
operator|.
name|create
argument_list|(
name|reviewers
operator|.
name|parse
argument_list|(
name|change
argument_list|,
name|IdString
operator|.
name|fromDecoded
argument_list|(
name|id
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot parse reviewer"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|abandon (AbandonInput in)
specifier|public
name|void
name|abandon
parameter_list|(
name|AbandonInput
name|in
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
name|abandon
operator|.
name|apply
argument_list|(
name|change
argument_list|,
name|in
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot abandon change"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|restore (RestoreInput in)
specifier|public
name|void
name|restore
parameter_list|(
name|RestoreInput
name|in
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
name|restore
operator|.
name|apply
argument_list|(
name|change
argument_list|,
name|in
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot restore change"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|move (MoveInput in)
specifier|public
name|void
name|move
parameter_list|(
name|MoveInput
name|in
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
name|move
operator|.
name|apply
argument_list|(
name|change
argument_list|,
name|in
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot move change"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|setPrivate (boolean value, @Nullable String message)
specifier|public
name|void
name|setPrivate
parameter_list|(
name|boolean
name|value
parameter_list|,
annotation|@
name|Nullable
name|String
name|message
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
name|InputWithMessage
name|input
init|=
operator|new
name|InputWithMessage
argument_list|(
name|message
argument_list|)
decl_stmt|;
if|if
condition|(
name|value
condition|)
block|{
name|postPrivate
operator|.
name|apply
argument_list|(
name|change
argument_list|,
name|input
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|deletePrivate
operator|.
name|apply
argument_list|(
name|change
argument_list|,
name|input
argument_list|)
expr_stmt|;
block|}
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot change private status"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|setWorkInProgress (@ullable String message)
specifier|public
name|void
name|setWorkInProgress
parameter_list|(
annotation|@
name|Nullable
name|String
name|message
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
name|setWip
operator|.
name|apply
argument_list|(
name|change
argument_list|,
operator|new
name|WorkInProgressOp
operator|.
name|Input
argument_list|(
name|message
argument_list|)
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot set work in progress state"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|setReadyForReview (@ullable String message)
specifier|public
name|void
name|setReadyForReview
parameter_list|(
annotation|@
name|Nullable
name|String
name|message
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
name|setReady
operator|.
name|apply
argument_list|(
name|change
argument_list|,
operator|new
name|WorkInProgressOp
operator|.
name|Input
argument_list|(
name|message
argument_list|)
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot set ready for review state"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|revert (RevertInput in)
specifier|public
name|ChangeApi
name|revert
parameter_list|(
name|RevertInput
name|in
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|changeApi
operator|.
name|id
argument_list|(
name|revert
operator|.
name|apply
argument_list|(
name|change
argument_list|,
name|in
argument_list|)
operator|.
name|value
argument_list|()
operator|.
name|_number
argument_list|)
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot revert change"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|revertSubmission (RevertInput in)
specifier|public
name|RevertSubmissionInfo
name|revertSubmission
parameter_list|(
name|RevertInput
name|in
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|revertSubmission
operator|.
name|apply
argument_list|(
name|change
argument_list|,
name|in
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot revert a change submission"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|createMergePatchSet (MergePatchSetInput in)
specifier|public
name|ChangeInfo
name|createMergePatchSet
parameter_list|(
name|MergePatchSetInput
name|in
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|updateByMerge
operator|.
name|apply
argument_list|(
name|change
argument_list|,
name|in
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot update change by merge"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|submittedTogether ( EnumSet<ListChangesOption> listOptions, EnumSet<SubmittedTogetherOption> submitOptions)
specifier|public
name|SubmittedTogetherInfo
name|submittedTogether
parameter_list|(
name|EnumSet
argument_list|<
name|ListChangesOption
argument_list|>
name|listOptions
parameter_list|,
name|EnumSet
argument_list|<
name|SubmittedTogetherOption
argument_list|>
name|submitOptions
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|submittedTogether
operator|.
name|get
argument_list|()
operator|.
name|addListChangesOption
argument_list|(
name|listOptions
argument_list|)
operator|.
name|addSubmittedTogetherOption
argument_list|(
name|submitOptions
argument_list|)
operator|.
name|applyInfo
argument_list|(
name|change
argument_list|)
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot query submittedTogether"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|rebase (RebaseInput in)
specifier|public
name|void
name|rebase
parameter_list|(
name|RebaseInput
name|in
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
name|rebase
operator|.
name|apply
argument_list|(
name|change
argument_list|,
name|in
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot rebase change"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|delete ()
specifier|public
name|void
name|delete
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
name|deleteChange
operator|.
name|apply
argument_list|(
name|change
argument_list|,
literal|null
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot delete change"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|topic ()
specifier|public
name|String
name|topic
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|getTopic
operator|.
name|apply
argument_list|(
name|change
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot get topic"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|topic (String topic)
specifier|public
name|void
name|topic
parameter_list|(
name|String
name|topic
parameter_list|)
throws|throws
name|RestApiException
block|{
name|TopicInput
name|in
init|=
operator|new
name|TopicInput
argument_list|()
decl_stmt|;
name|in
operator|.
name|topic
operator|=
name|topic
expr_stmt|;
try|try
block|{
name|putTopic
operator|.
name|apply
argument_list|(
name|change
argument_list|,
name|in
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot set topic"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|includedIn ()
specifier|public
name|IncludedInInfo
name|includedIn
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|includedIn
operator|.
name|apply
argument_list|(
name|change
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Could not extract IncludedIn data"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|addReviewer (AddReviewerInput in)
specifier|public
name|AddReviewerResult
name|addReviewer
parameter_list|(
name|AddReviewerInput
name|in
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|postReviewers
operator|.
name|apply
argument_list|(
name|change
argument_list|,
name|in
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot add change reviewer"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|suggestReviewers ()
specifier|public
name|SuggestedReviewersRequest
name|suggestReviewers
parameter_list|()
throws|throws
name|RestApiException
block|{
return|return
operator|new
name|SuggestedReviewersRequest
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|List
argument_list|<
name|SuggestedReviewerInfo
argument_list|>
name|get
parameter_list|()
throws|throws
name|RestApiException
block|{
return|return
name|ChangeApiImpl
operator|.
name|this
operator|.
name|suggestReviewers
argument_list|(
name|this
argument_list|)
return|;
block|}
block|}
return|;
block|}
DECL|method|suggestReviewers (SuggestedReviewersRequest r)
specifier|private
name|List
argument_list|<
name|SuggestedReviewerInfo
argument_list|>
name|suggestReviewers
parameter_list|(
name|SuggestedReviewersRequest
name|r
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
name|suggestReviewers
operator|.
name|setQuery
argument_list|(
name|r
operator|.
name|getQuery
argument_list|()
argument_list|)
expr_stmt|;
name|suggestReviewers
operator|.
name|setLimit
argument_list|(
name|r
operator|.
name|getLimit
argument_list|()
argument_list|)
expr_stmt|;
name|suggestReviewers
operator|.
name|setExcludeGroups
argument_list|(
name|r
operator|.
name|getExcludeGroups
argument_list|()
argument_list|)
expr_stmt|;
name|suggestReviewers
operator|.
name|setReviewerState
argument_list|(
name|r
operator|.
name|getReviewerState
argument_list|()
argument_list|)
expr_stmt|;
return|return
name|suggestReviewers
operator|.
name|apply
argument_list|(
name|change
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot retrieve suggested reviewers"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|reviewers ()
specifier|public
name|List
argument_list|<
name|ReviewerInfo
argument_list|>
name|reviewers
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|listReviewers
operator|.
name|apply
argument_list|(
name|change
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot retrieve reviewers"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|get ( EnumSet<ListChangesOption> options, ImmutableListMultimap<String, String> pluginOptions)
specifier|public
name|ChangeInfo
name|get
parameter_list|(
name|EnumSet
argument_list|<
name|ListChangesOption
argument_list|>
name|options
parameter_list|,
name|ImmutableListMultimap
argument_list|<
name|String
argument_list|,
name|String
argument_list|>
name|pluginOptions
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
name|GetChange
name|getChange
init|=
name|getChangeProvider
operator|.
name|get
argument_list|()
decl_stmt|;
name|options
operator|.
name|forEach
argument_list|(
name|getChange
operator|::
name|addOption
argument_list|)
expr_stmt|;
name|dynamicOptionParser
operator|.
name|parseDynamicOptions
argument_list|(
name|getChange
argument_list|,
name|pluginOptions
argument_list|)
expr_stmt|;
return|return
name|getChange
operator|.
name|apply
argument_list|(
name|change
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot retrieve change"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|edit ()
specifier|public
name|ChangeEditApi
name|edit
parameter_list|()
throws|throws
name|RestApiException
block|{
return|return
name|changeEditApi
operator|.
name|create
argument_list|(
name|change
argument_list|)
return|;
block|}
annotation|@
name|Override
DECL|method|setMessage (CommitMessageInput in)
specifier|public
name|void
name|setMessage
parameter_list|(
name|CommitMessageInput
name|in
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
name|putMessage
operator|.
name|apply
argument_list|(
name|change
argument_list|,
name|in
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot edit commit message"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|setHashtags (HashtagsInput input)
specifier|public
name|void
name|setHashtags
parameter_list|(
name|HashtagsInput
name|input
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
name|postHashtags
operator|.
name|apply
argument_list|(
name|change
argument_list|,
name|input
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot post hashtags"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|getHashtags ()
specifier|public
name|Set
argument_list|<
name|String
argument_list|>
name|getHashtags
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|getHashtags
operator|.
name|apply
argument_list|(
name|change
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot get hashtags"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|setAssignee (AssigneeInput input)
specifier|public
name|AccountInfo
name|setAssignee
parameter_list|(
name|AssigneeInput
name|input
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|putAssignee
operator|.
name|apply
argument_list|(
name|change
argument_list|,
name|input
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot set assignee"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|getAssignee ()
specifier|public
name|AccountInfo
name|getAssignee
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
name|Response
argument_list|<
name|AccountInfo
argument_list|>
name|r
init|=
name|getAssignee
operator|.
name|apply
argument_list|(
name|change
argument_list|)
decl_stmt|;
return|return
name|r
operator|.
name|isNone
argument_list|()
condition|?
literal|null
else|:
name|r
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot get assignee"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|getPastAssignees ()
specifier|public
name|List
argument_list|<
name|AccountInfo
argument_list|>
name|getPastAssignees
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|getPastAssignees
operator|.
name|apply
argument_list|(
name|change
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot get past assignees"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|deleteAssignee ()
specifier|public
name|AccountInfo
name|deleteAssignee
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
name|Response
argument_list|<
name|AccountInfo
argument_list|>
name|r
init|=
name|deleteAssignee
operator|.
name|apply
argument_list|(
name|change
argument_list|,
literal|null
argument_list|)
decl_stmt|;
return|return
name|r
operator|.
name|isNone
argument_list|()
condition|?
literal|null
else|:
name|r
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot delete assignee"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|comments ()
specifier|public
name|Map
argument_list|<
name|String
argument_list|,
name|List
argument_list|<
name|CommentInfo
argument_list|>
argument_list|>
name|comments
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|listComments
operator|.
name|apply
argument_list|(
name|change
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot get comments"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|commentsAsList ()
specifier|public
name|List
argument_list|<
name|CommentInfo
argument_list|>
name|commentsAsList
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|listComments
operator|.
name|getComments
argument_list|(
name|change
argument_list|)
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot get comments"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|robotComments ()
specifier|public
name|Map
argument_list|<
name|String
argument_list|,
name|List
argument_list|<
name|RobotCommentInfo
argument_list|>
argument_list|>
name|robotComments
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|listChangeRobotComments
operator|.
name|apply
argument_list|(
name|change
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot get robot comments"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|drafts ()
specifier|public
name|Map
argument_list|<
name|String
argument_list|,
name|List
argument_list|<
name|CommentInfo
argument_list|>
argument_list|>
name|drafts
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|listDrafts
operator|.
name|apply
argument_list|(
name|change
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot get drafts"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|draftsAsList ()
specifier|public
name|List
argument_list|<
name|CommentInfo
argument_list|>
name|draftsAsList
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|listDrafts
operator|.
name|getComments
argument_list|(
name|change
argument_list|)
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot get drafts"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|check ()
specifier|public
name|ChangeInfo
name|check
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|check
operator|.
name|apply
argument_list|(
name|change
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot check change"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|check (FixInput fix)
specifier|public
name|ChangeInfo
name|check
parameter_list|(
name|FixInput
name|fix
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
comment|// TODO(dborowitz): Convert to RetryingRestModifyView. Needs to plumb BatchUpdate.Factory into
comment|// ConsistencyChecker.
return|return
name|check
operator|.
name|apply
argument_list|(
name|change
argument_list|,
name|fix
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot check change"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|index ()
specifier|public
name|void
name|index
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
name|index
operator|.
name|apply
argument_list|(
name|change
argument_list|,
operator|new
name|Input
argument_list|()
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot index change"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|ignore (boolean ignore)
specifier|public
name|void
name|ignore
parameter_list|(
name|boolean
name|ignore
parameter_list|)
throws|throws
name|RestApiException
block|{
comment|// TODO(dborowitz): Convert to RetryingRestModifyView. Needs to plumb BatchUpdate.Factory into
comment|// StarredChangesUtil.
try|try
block|{
if|if
condition|(
name|ignore
condition|)
block|{
name|this
operator|.
name|ignore
operator|.
name|apply
argument_list|(
name|change
argument_list|,
operator|new
name|Input
argument_list|()
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|unignore
operator|.
name|apply
argument_list|(
name|change
argument_list|,
operator|new
name|Input
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
catch|catch
parameter_list|(
name|StorageException
decl||
name|IllegalLabelException
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot ignore change"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|ignored ()
specifier|public
name|boolean
name|ignored
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|stars
operator|.
name|isIgnored
argument_list|(
name|change
argument_list|)
return|;
block|}
catch|catch
parameter_list|(
name|StorageException
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot check if ignored"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|markAsReviewed (boolean reviewed)
specifier|public
name|void
name|markAsReviewed
parameter_list|(
name|boolean
name|reviewed
parameter_list|)
throws|throws
name|RestApiException
block|{
comment|// TODO(dborowitz): Convert to RetryingRestModifyView. Needs to plumb BatchUpdate.Factory into
comment|// StarredChangesUtil.
try|try
block|{
if|if
condition|(
name|reviewed
condition|)
block|{
name|markAsReviewed
operator|.
name|apply
argument_list|(
name|change
argument_list|,
operator|new
name|Input
argument_list|()
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|markAsUnreviewed
operator|.
name|apply
argument_list|(
name|change
argument_list|,
operator|new
name|Input
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
catch|catch
parameter_list|(
name|StorageException
decl||
name|IllegalLabelException
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot mark change as "
operator|+
operator|(
name|reviewed
condition|?
literal|"reviewed"
else|:
literal|"unreviewed"
operator|)
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|pureRevert ()
specifier|public
name|PureRevertInfo
name|pureRevert
parameter_list|()
throws|throws
name|RestApiException
block|{
return|return
name|pureRevert
argument_list|(
literal|null
argument_list|)
return|;
block|}
annotation|@
name|Override
DECL|method|pureRevert (@ullable String claimedOriginal)
specifier|public
name|PureRevertInfo
name|pureRevert
parameter_list|(
annotation|@
name|Nullable
name|String
name|claimedOriginal
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
name|GetPureRevert
name|getPureRevert
init|=
name|getPureRevertProvider
operator|.
name|get
argument_list|()
decl_stmt|;
name|getPureRevert
operator|.
name|setClaimedOriginal
argument_list|(
name|claimedOriginal
argument_list|)
expr_stmt|;
return|return
name|getPureRevert
operator|.
name|apply
argument_list|(
name|change
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot compute pure revert"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|messages ()
specifier|public
name|List
argument_list|<
name|ChangeMessageInfo
argument_list|>
name|messages
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|changeMessages
operator|.
name|list
argument_list|()
operator|.
name|apply
argument_list|(
name|change
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot list change messages"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|message (String id)
specifier|public
name|ChangeMessageApi
name|message
parameter_list|(
name|String
name|id
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
name|ChangeMessageResource
name|resource
init|=
name|changeMessages
operator|.
name|parse
argument_list|(
name|change
argument_list|,
name|IdString
operator|.
name|fromDecoded
argument_list|(
name|id
argument_list|)
argument_list|)
decl_stmt|;
return|return
name|changeMessageApi
operator|.
name|create
argument_list|(
name|resource
argument_list|)
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot parse change message "
operator|+
name|id
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Singleton
DECL|class|DynamicOptionParser
specifier|static
class|class
name|DynamicOptionParser
block|{
DECL|field|cmdLineParserFactory
specifier|private
specifier|final
name|CmdLineParser
operator|.
name|Factory
name|cmdLineParserFactory
decl_stmt|;
DECL|field|injector
specifier|private
specifier|final
name|Injector
name|injector
decl_stmt|;
DECL|field|dynamicBeans
specifier|private
specifier|final
name|DynamicMap
argument_list|<
name|DynamicOptions
operator|.
name|DynamicBean
argument_list|>
name|dynamicBeans
decl_stmt|;
annotation|@
name|Inject
DECL|method|DynamicOptionParser ( CmdLineParser.Factory cmdLineParserFactory, Injector injector, DynamicMap<DynamicOptions.DynamicBean> dynamicBeans)
name|DynamicOptionParser
parameter_list|(
name|CmdLineParser
operator|.
name|Factory
name|cmdLineParserFactory
parameter_list|,
name|Injector
name|injector
parameter_list|,
name|DynamicMap
argument_list|<
name|DynamicOptions
operator|.
name|DynamicBean
argument_list|>
name|dynamicBeans
parameter_list|)
block|{
name|this
operator|.
name|cmdLineParserFactory
operator|=
name|cmdLineParserFactory
expr_stmt|;
name|this
operator|.
name|injector
operator|=
name|injector
expr_stmt|;
name|this
operator|.
name|dynamicBeans
operator|=
name|dynamicBeans
expr_stmt|;
block|}
DECL|method|parseDynamicOptions (Object bean, ListMultimap<String, String> pluginOptions)
name|void
name|parseDynamicOptions
parameter_list|(
name|Object
name|bean
parameter_list|,
name|ListMultimap
argument_list|<
name|String
argument_list|,
name|String
argument_list|>
name|pluginOptions
parameter_list|)
throws|throws
name|BadRequestException
block|{
name|CmdLineParser
name|clp
init|=
name|cmdLineParserFactory
operator|.
name|create
argument_list|(
name|bean
argument_list|)
decl_stmt|;
name|DynamicOptions
name|dynamicOptions
init|=
operator|new
name|DynamicOptions
argument_list|(
name|bean
argument_list|,
name|injector
argument_list|,
name|dynamicBeans
argument_list|)
decl_stmt|;
name|dynamicOptions
operator|.
name|parseDynamicBeans
argument_list|(
name|clp
argument_list|)
expr_stmt|;
name|dynamicOptions
operator|.
name|setDynamicBeans
argument_list|()
expr_stmt|;
name|dynamicOptions
operator|.
name|onBeanParseStart
argument_list|()
expr_stmt|;
try|try
block|{
name|clp
operator|.
name|parseOptionMap
argument_list|(
name|pluginOptions
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|CmdLineException
decl||
name|NumberFormatException
name|e
parameter_list|)
block|{
throw|throw
operator|new
name|BadRequestException
argument_list|(
name|e
operator|.
name|getMessage
argument_list|()
argument_list|,
name|e
argument_list|)
throw|;
block|}
name|dynamicOptions
operator|.
name|onBeanParseEnd
argument_list|()
expr_stmt|;
block|}
block|}
block|}
end_class

end_unit

