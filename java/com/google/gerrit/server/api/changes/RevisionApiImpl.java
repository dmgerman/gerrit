begin_unit|revision:0.9.5;language:Java;cregit-version:0.0.1
begin_comment
comment|// Copyright (C) 2013 The Android Open Source Project
end_comment

begin_comment
comment|//
end_comment

begin_comment
comment|// Licensed under the Apache License, Version 2.0 (the "License");
end_comment

begin_comment
comment|// you may not use this file except in compliance with the License.
end_comment

begin_comment
comment|// You may obtain a copy of the License at
end_comment

begin_comment
comment|//
end_comment

begin_comment
comment|// http://www.apache.org/licenses/LICENSE-2.0
end_comment

begin_comment
comment|//
end_comment

begin_comment
comment|// Unless required by applicable law or agreed to in writing, software
end_comment

begin_comment
comment|// distributed under the License is distributed on an "AS IS" BASIS,
end_comment

begin_comment
comment|// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
end_comment

begin_comment
comment|// See the License for the specific language governing permissions and
end_comment

begin_comment
comment|// limitations under the License.
end_comment

begin_package
DECL|package|com.google.gerrit.server.api.changes
package|package
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|api
operator|.
name|changes
package|;
end_package

begin_import
import|import static
name|com
operator|.
name|google
operator|.
name|common
operator|.
name|base
operator|.
name|Preconditions
operator|.
name|checkArgument
import|;
end_import

begin_import
import|import static
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|api
operator|.
name|ApiUtil
operator|.
name|asRestApiException
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|common
operator|.
name|collect
operator|.
name|ImmutableSet
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|common
operator|.
name|collect
operator|.
name|ListMultimap
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|common
operator|.
name|collect
operator|.
name|MultimapBuilder
operator|.
name|ListMultimapBuilder
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|common
operator|.
name|Nullable
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|entities
operator|.
name|PatchSetApproval
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|ChangeApi
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|Changes
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|CherryPickInput
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|CommentApi
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|DraftApi
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|DraftInput
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|FileApi
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|RebaseInput
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|RelatedChangesInfo
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|ReviewInput
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|ReviewResult
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|RevisionApi
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|RevisionReviewerApi
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|RobotCommentApi
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|api
operator|.
name|changes
operator|.
name|SubmitInput
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|client
operator|.
name|SubmitType
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|common
operator|.
name|ActionInfo
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|common
operator|.
name|ApprovalInfo
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|common
operator|.
name|CherryPickChangeInfo
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|common
operator|.
name|CommentInfo
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|common
operator|.
name|CommitInfo
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|common
operator|.
name|DescriptionInput
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|common
operator|.
name|DiffInfo
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|common
operator|.
name|EditInfo
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|common
operator|.
name|FileInfo
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|common
operator|.
name|Input
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|common
operator|.
name|MergeableInfo
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|common
operator|.
name|RobotCommentInfo
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|common
operator|.
name|TestSubmitRuleInfo
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|common
operator|.
name|TestSubmitRuleInput
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|restapi
operator|.
name|BinaryResult
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|restapi
operator|.
name|IdString
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|restapi
operator|.
name|RestApiException
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|extensions
operator|.
name|restapi
operator|.
name|RestModifyView
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|ApprovalsUtil
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|account
operator|.
name|AccountDirectory
operator|.
name|FillOptions
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|account
operator|.
name|AccountLoader
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|change
operator|.
name|FileResource
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|change
operator|.
name|RebaseUtil
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|change
operator|.
name|RevisionResource
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|git
operator|.
name|GitRepositoryManager
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|ApplyFix
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|CherryPick
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|Comments
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|CreateDraftComment
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|DraftComments
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|Files
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|Fixes
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|GetCommit
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|GetDescription
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|GetFixPreview
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|GetMergeList
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|GetPatch
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|GetRelated
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|GetRevisionActions
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|ListRevisionComments
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|ListRevisionDrafts
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|ListRobotComments
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|Mergeable
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|PostReview
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|PreviewSubmit
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|PutDescription
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|Rebase
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|Reviewed
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|RevisionReviewers
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|RobotComments
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|Submit
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|TestSubmitRule
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|gerrit
operator|.
name|server
operator|.
name|restapi
operator|.
name|change
operator|.
name|TestSubmitType
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|inject
operator|.
name|Inject
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|inject
operator|.
name|Provider
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|inject
operator|.
name|assistedinject
operator|.
name|Assisted
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|EnumSet
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|List
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Map
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Set
import|;
end_import

begin_import
import|import
name|org
operator|.
name|eclipse
operator|.
name|jgit
operator|.
name|lib
operator|.
name|Repository
import|;
end_import

begin_import
import|import
name|org
operator|.
name|eclipse
operator|.
name|jgit
operator|.
name|revwalk
operator|.
name|RevWalk
import|;
end_import

begin_class
DECL|class|RevisionApiImpl
class|class
name|RevisionApiImpl
implements|implements
name|RevisionApi
block|{
DECL|interface|Factory
interface|interface
name|Factory
block|{
DECL|method|create (RevisionResource r)
name|RevisionApiImpl
name|create
parameter_list|(
name|RevisionResource
name|r
parameter_list|)
function_decl|;
block|}
DECL|field|repoManager
specifier|private
specifier|final
name|GitRepositoryManager
name|repoManager
decl_stmt|;
DECL|field|changes
specifier|private
specifier|final
name|Changes
name|changes
decl_stmt|;
DECL|field|revisionReviewers
specifier|private
specifier|final
name|RevisionReviewers
name|revisionReviewers
decl_stmt|;
DECL|field|revisionReviewerApi
specifier|private
specifier|final
name|RevisionReviewerApiImpl
operator|.
name|Factory
name|revisionReviewerApi
decl_stmt|;
DECL|field|cherryPick
specifier|private
specifier|final
name|CherryPick
name|cherryPick
decl_stmt|;
DECL|field|rebase
specifier|private
specifier|final
name|Rebase
name|rebase
decl_stmt|;
DECL|field|rebaseUtil
specifier|private
specifier|final
name|RebaseUtil
name|rebaseUtil
decl_stmt|;
DECL|field|submit
specifier|private
specifier|final
name|Submit
name|submit
decl_stmt|;
DECL|field|submitPreview
specifier|private
specifier|final
name|PreviewSubmit
name|submitPreview
decl_stmt|;
DECL|field|putReviewed
specifier|private
specifier|final
name|Reviewed
operator|.
name|PutReviewed
name|putReviewed
decl_stmt|;
DECL|field|deleteReviewed
specifier|private
specifier|final
name|Reviewed
operator|.
name|DeleteReviewed
name|deleteReviewed
decl_stmt|;
DECL|field|revision
specifier|private
specifier|final
name|RevisionResource
name|revision
decl_stmt|;
DECL|field|files
specifier|private
specifier|final
name|Files
name|files
decl_stmt|;
DECL|field|listFiles
specifier|private
specifier|final
name|Files
operator|.
name|ListFiles
name|listFiles
decl_stmt|;
DECL|field|getCommit
specifier|private
specifier|final
name|GetCommit
name|getCommit
decl_stmt|;
DECL|field|getPatch
specifier|private
specifier|final
name|GetPatch
name|getPatch
decl_stmt|;
DECL|field|review
specifier|private
specifier|final
name|PostReview
name|review
decl_stmt|;
DECL|field|mergeable
specifier|private
specifier|final
name|Mergeable
name|mergeable
decl_stmt|;
DECL|field|fileApi
specifier|private
specifier|final
name|FileApiImpl
operator|.
name|Factory
name|fileApi
decl_stmt|;
DECL|field|listComments
specifier|private
specifier|final
name|ListRevisionComments
name|listComments
decl_stmt|;
DECL|field|listRobotComments
specifier|private
specifier|final
name|ListRobotComments
name|listRobotComments
decl_stmt|;
DECL|field|applyFix
specifier|private
specifier|final
name|ApplyFix
name|applyFix
decl_stmt|;
DECL|field|getFixPreview
specifier|private
specifier|final
name|GetFixPreview
name|getFixPreview
decl_stmt|;
DECL|field|fixes
specifier|private
specifier|final
name|Fixes
name|fixes
decl_stmt|;
DECL|field|listDrafts
specifier|private
specifier|final
name|ListRevisionDrafts
name|listDrafts
decl_stmt|;
DECL|field|createDraft
specifier|private
specifier|final
name|CreateDraftComment
name|createDraft
decl_stmt|;
DECL|field|drafts
specifier|private
specifier|final
name|DraftComments
name|drafts
decl_stmt|;
DECL|field|draftFactory
specifier|private
specifier|final
name|DraftApiImpl
operator|.
name|Factory
name|draftFactory
decl_stmt|;
DECL|field|comments
specifier|private
specifier|final
name|Comments
name|comments
decl_stmt|;
DECL|field|commentFactory
specifier|private
specifier|final
name|CommentApiImpl
operator|.
name|Factory
name|commentFactory
decl_stmt|;
DECL|field|robotComments
specifier|private
specifier|final
name|RobotComments
name|robotComments
decl_stmt|;
DECL|field|robotCommentFactory
specifier|private
specifier|final
name|RobotCommentApiImpl
operator|.
name|Factory
name|robotCommentFactory
decl_stmt|;
DECL|field|revisionActions
specifier|private
specifier|final
name|GetRevisionActions
name|revisionActions
decl_stmt|;
DECL|field|testSubmitType
specifier|private
specifier|final
name|TestSubmitType
name|testSubmitType
decl_stmt|;
DECL|field|getSubmitType
specifier|private
specifier|final
name|TestSubmitType
operator|.
name|Get
name|getSubmitType
decl_stmt|;
DECL|field|testSubmitRule
specifier|private
specifier|final
name|Provider
argument_list|<
name|TestSubmitRule
argument_list|>
name|testSubmitRule
decl_stmt|;
DECL|field|getMergeList
specifier|private
specifier|final
name|Provider
argument_list|<
name|GetMergeList
argument_list|>
name|getMergeList
decl_stmt|;
DECL|field|getRelated
specifier|private
specifier|final
name|GetRelated
name|getRelated
decl_stmt|;
DECL|field|putDescription
specifier|private
specifier|final
name|PutDescription
name|putDescription
decl_stmt|;
DECL|field|getDescription
specifier|private
specifier|final
name|GetDescription
name|getDescription
decl_stmt|;
DECL|field|approvalsUtil
specifier|private
specifier|final
name|ApprovalsUtil
name|approvalsUtil
decl_stmt|;
DECL|field|accountLoaderFactory
specifier|private
specifier|final
name|AccountLoader
operator|.
name|Factory
name|accountLoaderFactory
decl_stmt|;
annotation|@
name|Inject
DECL|method|RevisionApiImpl ( GitRepositoryManager repoManager, Changes changes, RevisionReviewers revisionReviewers, RevisionReviewerApiImpl.Factory revisionReviewerApi, CherryPick cherryPick, Rebase rebase, RebaseUtil rebaseUtil, Submit submit, PreviewSubmit submitPreview, Reviewed.PutReviewed putReviewed, Reviewed.DeleteReviewed deleteReviewed, Files files, Files.ListFiles listFiles, GetCommit getCommit, GetPatch getPatch, PostReview review, Mergeable mergeable, FileApiImpl.Factory fileApi, ListRevisionComments listComments, ListRobotComments listRobotComments, ApplyFix applyFix, GetFixPreview getFixPreview, Fixes fixes, ListRevisionDrafts listDrafts, CreateDraftComment createDraft, DraftComments drafts, DraftApiImpl.Factory draftFactory, Comments comments, CommentApiImpl.Factory commentFactory, RobotComments robotComments, RobotCommentApiImpl.Factory robotCommentFactory, GetRevisionActions revisionActions, TestSubmitType testSubmitType, TestSubmitType.Get getSubmitType, Provider<TestSubmitRule> testSubmitRule, Provider<GetMergeList> getMergeList, GetRelated getRelated, PutDescription putDescription, GetDescription getDescription, ApprovalsUtil approvalsUtil, AccountLoader.Factory accountLoaderFactory, @Assisted RevisionResource r)
name|RevisionApiImpl
parameter_list|(
name|GitRepositoryManager
name|repoManager
parameter_list|,
name|Changes
name|changes
parameter_list|,
name|RevisionReviewers
name|revisionReviewers
parameter_list|,
name|RevisionReviewerApiImpl
operator|.
name|Factory
name|revisionReviewerApi
parameter_list|,
name|CherryPick
name|cherryPick
parameter_list|,
name|Rebase
name|rebase
parameter_list|,
name|RebaseUtil
name|rebaseUtil
parameter_list|,
name|Submit
name|submit
parameter_list|,
name|PreviewSubmit
name|submitPreview
parameter_list|,
name|Reviewed
operator|.
name|PutReviewed
name|putReviewed
parameter_list|,
name|Reviewed
operator|.
name|DeleteReviewed
name|deleteReviewed
parameter_list|,
name|Files
name|files
parameter_list|,
name|Files
operator|.
name|ListFiles
name|listFiles
parameter_list|,
name|GetCommit
name|getCommit
parameter_list|,
name|GetPatch
name|getPatch
parameter_list|,
name|PostReview
name|review
parameter_list|,
name|Mergeable
name|mergeable
parameter_list|,
name|FileApiImpl
operator|.
name|Factory
name|fileApi
parameter_list|,
name|ListRevisionComments
name|listComments
parameter_list|,
name|ListRobotComments
name|listRobotComments
parameter_list|,
name|ApplyFix
name|applyFix
parameter_list|,
name|GetFixPreview
name|getFixPreview
parameter_list|,
name|Fixes
name|fixes
parameter_list|,
name|ListRevisionDrafts
name|listDrafts
parameter_list|,
name|CreateDraftComment
name|createDraft
parameter_list|,
name|DraftComments
name|drafts
parameter_list|,
name|DraftApiImpl
operator|.
name|Factory
name|draftFactory
parameter_list|,
name|Comments
name|comments
parameter_list|,
name|CommentApiImpl
operator|.
name|Factory
name|commentFactory
parameter_list|,
name|RobotComments
name|robotComments
parameter_list|,
name|RobotCommentApiImpl
operator|.
name|Factory
name|robotCommentFactory
parameter_list|,
name|GetRevisionActions
name|revisionActions
parameter_list|,
name|TestSubmitType
name|testSubmitType
parameter_list|,
name|TestSubmitType
operator|.
name|Get
name|getSubmitType
parameter_list|,
name|Provider
argument_list|<
name|TestSubmitRule
argument_list|>
name|testSubmitRule
parameter_list|,
name|Provider
argument_list|<
name|GetMergeList
argument_list|>
name|getMergeList
parameter_list|,
name|GetRelated
name|getRelated
parameter_list|,
name|PutDescription
name|putDescription
parameter_list|,
name|GetDescription
name|getDescription
parameter_list|,
name|ApprovalsUtil
name|approvalsUtil
parameter_list|,
name|AccountLoader
operator|.
name|Factory
name|accountLoaderFactory
parameter_list|,
annotation|@
name|Assisted
name|RevisionResource
name|r
parameter_list|)
block|{
name|this
operator|.
name|repoManager
operator|=
name|repoManager
expr_stmt|;
name|this
operator|.
name|changes
operator|=
name|changes
expr_stmt|;
name|this
operator|.
name|revisionReviewers
operator|=
name|revisionReviewers
expr_stmt|;
name|this
operator|.
name|revisionReviewerApi
operator|=
name|revisionReviewerApi
expr_stmt|;
name|this
operator|.
name|cherryPick
operator|=
name|cherryPick
expr_stmt|;
name|this
operator|.
name|rebase
operator|=
name|rebase
expr_stmt|;
name|this
operator|.
name|rebaseUtil
operator|=
name|rebaseUtil
expr_stmt|;
name|this
operator|.
name|review
operator|=
name|review
expr_stmt|;
name|this
operator|.
name|submit
operator|=
name|submit
expr_stmt|;
name|this
operator|.
name|submitPreview
operator|=
name|submitPreview
expr_stmt|;
name|this
operator|.
name|files
operator|=
name|files
expr_stmt|;
name|this
operator|.
name|putReviewed
operator|=
name|putReviewed
expr_stmt|;
name|this
operator|.
name|deleteReviewed
operator|=
name|deleteReviewed
expr_stmt|;
name|this
operator|.
name|listFiles
operator|=
name|listFiles
expr_stmt|;
name|this
operator|.
name|getCommit
operator|=
name|getCommit
expr_stmt|;
name|this
operator|.
name|getPatch
operator|=
name|getPatch
expr_stmt|;
name|this
operator|.
name|mergeable
operator|=
name|mergeable
expr_stmt|;
name|this
operator|.
name|fileApi
operator|=
name|fileApi
expr_stmt|;
name|this
operator|.
name|listComments
operator|=
name|listComments
expr_stmt|;
name|this
operator|.
name|robotComments
operator|=
name|robotComments
expr_stmt|;
name|this
operator|.
name|listRobotComments
operator|=
name|listRobotComments
expr_stmt|;
name|this
operator|.
name|applyFix
operator|=
name|applyFix
expr_stmt|;
name|this
operator|.
name|getFixPreview
operator|=
name|getFixPreview
expr_stmt|;
name|this
operator|.
name|fixes
operator|=
name|fixes
expr_stmt|;
name|this
operator|.
name|listDrafts
operator|=
name|listDrafts
expr_stmt|;
name|this
operator|.
name|createDraft
operator|=
name|createDraft
expr_stmt|;
name|this
operator|.
name|drafts
operator|=
name|drafts
expr_stmt|;
name|this
operator|.
name|draftFactory
operator|=
name|draftFactory
expr_stmt|;
name|this
operator|.
name|comments
operator|=
name|comments
expr_stmt|;
name|this
operator|.
name|commentFactory
operator|=
name|commentFactory
expr_stmt|;
name|this
operator|.
name|robotCommentFactory
operator|=
name|robotCommentFactory
expr_stmt|;
name|this
operator|.
name|revisionActions
operator|=
name|revisionActions
expr_stmt|;
name|this
operator|.
name|testSubmitType
operator|=
name|testSubmitType
expr_stmt|;
name|this
operator|.
name|getSubmitType
operator|=
name|getSubmitType
expr_stmt|;
name|this
operator|.
name|testSubmitRule
operator|=
name|testSubmitRule
expr_stmt|;
name|this
operator|.
name|getMergeList
operator|=
name|getMergeList
expr_stmt|;
name|this
operator|.
name|getRelated
operator|=
name|getRelated
expr_stmt|;
name|this
operator|.
name|putDescription
operator|=
name|putDescription
expr_stmt|;
name|this
operator|.
name|getDescription
operator|=
name|getDescription
expr_stmt|;
name|this
operator|.
name|approvalsUtil
operator|=
name|approvalsUtil
expr_stmt|;
name|this
operator|.
name|accountLoaderFactory
operator|=
name|accountLoaderFactory
expr_stmt|;
name|this
operator|.
name|revision
operator|=
name|r
expr_stmt|;
block|}
annotation|@
name|Override
DECL|method|review (ReviewInput in)
specifier|public
name|ReviewResult
name|review
parameter_list|(
name|ReviewInput
name|in
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|review
operator|.
name|apply
argument_list|(
name|revision
argument_list|,
name|in
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot post review"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|submit (SubmitInput in)
specifier|public
name|void
name|submit
parameter_list|(
name|SubmitInput
name|in
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
name|submit
operator|.
name|apply
argument_list|(
name|revision
argument_list|,
name|in
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot submit change"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|submitPreview (String format)
specifier|public
name|BinaryResult
name|submitPreview
parameter_list|(
name|String
name|format
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
name|submitPreview
operator|.
name|setFormat
argument_list|(
name|format
argument_list|)
expr_stmt|;
return|return
name|submitPreview
operator|.
name|apply
argument_list|(
name|revision
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot get submit preview"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|rebase (RebaseInput in)
specifier|public
name|ChangeApi
name|rebase
parameter_list|(
name|RebaseInput
name|in
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|changes
operator|.
name|id
argument_list|(
name|rebase
operator|.
name|apply
argument_list|(
name|revision
argument_list|,
name|in
argument_list|)
operator|.
name|value
argument_list|()
operator|.
name|_number
argument_list|)
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot rebase ps"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|canRebase ()
specifier|public
name|boolean
name|canRebase
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
init|(
name|Repository
name|repo
init|=
name|repoManager
operator|.
name|openRepository
argument_list|(
name|revision
operator|.
name|getProject
argument_list|()
argument_list|)
init|;
name|RevWalk
name|rw
operator|=
operator|new
name|RevWalk
argument_list|(
name|repo
argument_list|)
init|)
block|{
return|return
name|rebaseUtil
operator|.
name|canRebase
argument_list|(
name|revision
operator|.
name|getPatchSet
argument_list|()
argument_list|,
name|revision
operator|.
name|getChange
argument_list|()
operator|.
name|getDest
argument_list|()
argument_list|,
name|repo
argument_list|,
name|rw
argument_list|)
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot check if rebase is possible"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|cherryPick (CherryPickInput in)
specifier|public
name|ChangeApi
name|cherryPick
parameter_list|(
name|CherryPickInput
name|in
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|changes
operator|.
name|id
argument_list|(
name|cherryPick
operator|.
name|apply
argument_list|(
name|revision
argument_list|,
name|in
argument_list|)
operator|.
name|value
argument_list|()
operator|.
name|_number
argument_list|)
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot cherry pick"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|cherryPickAsInfo (CherryPickInput in)
specifier|public
name|CherryPickChangeInfo
name|cherryPickAsInfo
parameter_list|(
name|CherryPickInput
name|in
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|cherryPick
operator|.
name|apply
argument_list|(
name|revision
argument_list|,
name|in
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot cherry pick"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|reviewer (String id)
specifier|public
name|RevisionReviewerApi
name|reviewer
parameter_list|(
name|String
name|id
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|revisionReviewerApi
operator|.
name|create
argument_list|(
name|revisionReviewers
operator|.
name|parse
argument_list|(
name|revision
argument_list|,
name|IdString
operator|.
name|fromDecoded
argument_list|(
name|id
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot parse reviewer"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|setReviewed (String path, boolean reviewed)
specifier|public
name|void
name|setReviewed
parameter_list|(
name|String
name|path
parameter_list|,
name|boolean
name|reviewed
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
name|RestModifyView
argument_list|<
name|FileResource
argument_list|,
name|Input
argument_list|>
name|view
decl_stmt|;
if|if
condition|(
name|reviewed
condition|)
block|{
name|view
operator|=
name|putReviewed
expr_stmt|;
block|}
else|else
block|{
name|view
operator|=
name|deleteReviewed
expr_stmt|;
block|}
name|view
operator|.
name|apply
argument_list|(
name|files
operator|.
name|parse
argument_list|(
name|revision
argument_list|,
name|IdString
operator|.
name|fromDecoded
argument_list|(
name|path
argument_list|)
argument_list|)
argument_list|,
operator|new
name|Input
argument_list|()
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot update reviewed flag"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|SuppressWarnings
argument_list|(
literal|"unchecked"
argument_list|)
annotation|@
name|Override
DECL|method|reviewed ()
specifier|public
name|Set
argument_list|<
name|String
argument_list|>
name|reviewed
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|ImmutableSet
operator|.
name|copyOf
argument_list|(
operator|(
name|Iterable
argument_list|<
name|String
argument_list|>
operator|)
name|listFiles
operator|.
name|setReviewed
argument_list|(
literal|true
argument_list|)
operator|.
name|apply
argument_list|(
name|revision
argument_list|)
operator|.
name|value
argument_list|()
argument_list|)
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot list reviewed files"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|mergeable ()
specifier|public
name|MergeableInfo
name|mergeable
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|mergeable
operator|.
name|apply
argument_list|(
name|revision
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot check mergeability"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|mergeableOtherBranches ()
specifier|public
name|MergeableInfo
name|mergeableOtherBranches
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
name|mergeable
operator|.
name|setOtherBranches
argument_list|(
literal|true
argument_list|)
expr_stmt|;
return|return
name|mergeable
operator|.
name|apply
argument_list|(
name|revision
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot check mergeability"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|SuppressWarnings
argument_list|(
literal|"unchecked"
argument_list|)
annotation|@
name|Override
DECL|method|files (@ullable String base)
specifier|public
name|Map
argument_list|<
name|String
argument_list|,
name|FileInfo
argument_list|>
name|files
parameter_list|(
annotation|@
name|Nullable
name|String
name|base
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
operator|(
name|Map
argument_list|<
name|String
argument_list|,
name|FileInfo
argument_list|>
operator|)
name|listFiles
operator|.
name|setBase
argument_list|(
name|base
argument_list|)
operator|.
name|apply
argument_list|(
name|revision
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot retrieve files"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|SuppressWarnings
argument_list|(
literal|"unchecked"
argument_list|)
annotation|@
name|Override
DECL|method|files (int parentNum)
specifier|public
name|Map
argument_list|<
name|String
argument_list|,
name|FileInfo
argument_list|>
name|files
parameter_list|(
name|int
name|parentNum
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
operator|(
name|Map
argument_list|<
name|String
argument_list|,
name|FileInfo
argument_list|>
operator|)
name|listFiles
operator|.
name|setParent
argument_list|(
name|parentNum
argument_list|)
operator|.
name|apply
argument_list|(
name|revision
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot retrieve files"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|SuppressWarnings
argument_list|(
literal|"unchecked"
argument_list|)
annotation|@
name|Override
DECL|method|queryFiles (String query)
specifier|public
name|List
argument_list|<
name|String
argument_list|>
name|queryFiles
parameter_list|(
name|String
name|query
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
name|checkArgument
argument_list|(
name|query
operator|!=
literal|null
argument_list|,
literal|"no query provided"
argument_list|)
expr_stmt|;
return|return
operator|(
name|List
argument_list|<
name|String
argument_list|>
operator|)
name|listFiles
operator|.
name|setQuery
argument_list|(
name|query
argument_list|)
operator|.
name|apply
argument_list|(
name|revision
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot retrieve files"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|file (String path)
specifier|public
name|FileApi
name|file
parameter_list|(
name|String
name|path
parameter_list|)
block|{
return|return
name|fileApi
operator|.
name|create
argument_list|(
name|files
operator|.
name|parse
argument_list|(
name|revision
argument_list|,
name|IdString
operator|.
name|fromDecoded
argument_list|(
name|path
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
annotation|@
name|Override
DECL|method|commit (boolean addLinks)
specifier|public
name|CommitInfo
name|commit
parameter_list|(
name|boolean
name|addLinks
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|getCommit
operator|.
name|setAddLinks
argument_list|(
name|addLinks
argument_list|)
operator|.
name|apply
argument_list|(
name|revision
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot retrieve commit"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|comments ()
specifier|public
name|Map
argument_list|<
name|String
argument_list|,
name|List
argument_list|<
name|CommentInfo
argument_list|>
argument_list|>
name|comments
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|listComments
operator|.
name|apply
argument_list|(
name|revision
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot retrieve comments"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|robotComments ()
specifier|public
name|Map
argument_list|<
name|String
argument_list|,
name|List
argument_list|<
name|RobotCommentInfo
argument_list|>
argument_list|>
name|robotComments
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|listRobotComments
operator|.
name|apply
argument_list|(
name|revision
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot retrieve robot comments"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|commentsAsList ()
specifier|public
name|List
argument_list|<
name|CommentInfo
argument_list|>
name|commentsAsList
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|listComments
operator|.
name|getComments
argument_list|(
name|revision
argument_list|)
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot retrieve comments"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|drafts ()
specifier|public
name|Map
argument_list|<
name|String
argument_list|,
name|List
argument_list|<
name|CommentInfo
argument_list|>
argument_list|>
name|drafts
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|listDrafts
operator|.
name|apply
argument_list|(
name|revision
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot retrieve drafts"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|robotCommentsAsList ()
specifier|public
name|List
argument_list|<
name|RobotCommentInfo
argument_list|>
name|robotCommentsAsList
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|listRobotComments
operator|.
name|getComments
argument_list|(
name|revision
argument_list|)
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot retrieve robot comments"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|applyFix (String fixId)
specifier|public
name|EditInfo
name|applyFix
parameter_list|(
name|String
name|fixId
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|applyFix
operator|.
name|apply
argument_list|(
name|fixes
operator|.
name|parse
argument_list|(
name|revision
argument_list|,
name|IdString
operator|.
name|fromDecoded
argument_list|(
name|fixId
argument_list|)
argument_list|)
argument_list|,
literal|null
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot apply fix"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|getFixPreview (String fixId)
specifier|public
name|Map
argument_list|<
name|String
argument_list|,
name|DiffInfo
argument_list|>
name|getFixPreview
parameter_list|(
name|String
name|fixId
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|getFixPreview
operator|.
name|apply
argument_list|(
name|fixes
operator|.
name|parse
argument_list|(
name|revision
argument_list|,
name|IdString
operator|.
name|fromDecoded
argument_list|(
name|fixId
argument_list|)
argument_list|)
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot get fix preview"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|draftsAsList ()
specifier|public
name|List
argument_list|<
name|CommentInfo
argument_list|>
name|draftsAsList
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|listDrafts
operator|.
name|getComments
argument_list|(
name|revision
argument_list|)
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot retrieve drafts"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|draft (String id)
specifier|public
name|DraftApi
name|draft
parameter_list|(
name|String
name|id
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|draftFactory
operator|.
name|create
argument_list|(
name|drafts
operator|.
name|parse
argument_list|(
name|revision
argument_list|,
name|IdString
operator|.
name|fromDecoded
argument_list|(
name|id
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot retrieve draft"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|createDraft (DraftInput in)
specifier|public
name|DraftApi
name|createDraft
parameter_list|(
name|DraftInput
name|in
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
name|String
name|id
init|=
name|createDraft
operator|.
name|apply
argument_list|(
name|revision
argument_list|,
name|in
argument_list|)
operator|.
name|value
argument_list|()
operator|.
name|id
decl_stmt|;
comment|// Reread change to pick up new notes refs.
return|return
name|changes
operator|.
name|id
argument_list|(
name|revision
operator|.
name|getChange
argument_list|()
operator|.
name|getId
argument_list|()
operator|.
name|get
argument_list|()
argument_list|)
operator|.
name|revision
argument_list|(
name|revision
operator|.
name|getPatchSet
argument_list|()
operator|.
name|id
argument_list|()
operator|.
name|get
argument_list|()
argument_list|)
operator|.
name|draft
argument_list|(
name|id
argument_list|)
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot create draft"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|comment (String id)
specifier|public
name|CommentApi
name|comment
parameter_list|(
name|String
name|id
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|commentFactory
operator|.
name|create
argument_list|(
name|comments
operator|.
name|parse
argument_list|(
name|revision
argument_list|,
name|IdString
operator|.
name|fromDecoded
argument_list|(
name|id
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot retrieve comment"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|robotComment (String id)
specifier|public
name|RobotCommentApi
name|robotComment
parameter_list|(
name|String
name|id
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|robotCommentFactory
operator|.
name|create
argument_list|(
name|robotComments
operator|.
name|parse
argument_list|(
name|revision
argument_list|,
name|IdString
operator|.
name|fromDecoded
argument_list|(
name|id
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot retrieve robot comment"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|patch ()
specifier|public
name|BinaryResult
name|patch
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|getPatch
operator|.
name|apply
argument_list|(
name|revision
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot get patch"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|patch (String path)
specifier|public
name|BinaryResult
name|patch
parameter_list|(
name|String
name|path
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|getPatch
operator|.
name|setPath
argument_list|(
name|path
argument_list|)
operator|.
name|apply
argument_list|(
name|revision
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot get patch"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|actions ()
specifier|public
name|Map
argument_list|<
name|String
argument_list|,
name|ActionInfo
argument_list|>
name|actions
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|revisionActions
operator|.
name|apply
argument_list|(
name|revision
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot get actions"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|submitType ()
specifier|public
name|SubmitType
name|submitType
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|getSubmitType
operator|.
name|apply
argument_list|(
name|revision
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot get submit type"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|testSubmitType (TestSubmitRuleInput in)
specifier|public
name|SubmitType
name|testSubmitType
parameter_list|(
name|TestSubmitRuleInput
name|in
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|testSubmitType
operator|.
name|apply
argument_list|(
name|revision
argument_list|,
name|in
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot test submit type"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|testSubmitRule (TestSubmitRuleInput in)
specifier|public
name|TestSubmitRuleInfo
name|testSubmitRule
parameter_list|(
name|TestSubmitRuleInput
name|in
parameter_list|)
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|testSubmitRule
operator|.
name|get
argument_list|()
operator|.
name|apply
argument_list|(
name|revision
argument_list|,
name|in
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot test submit rule"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|getMergeList ()
specifier|public
name|MergeListRequest
name|getMergeList
parameter_list|()
throws|throws
name|RestApiException
block|{
return|return
operator|new
name|MergeListRequest
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|List
argument_list|<
name|CommitInfo
argument_list|>
name|get
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
name|GetMergeList
name|gml
init|=
name|getMergeList
operator|.
name|get
argument_list|()
decl_stmt|;
name|gml
operator|.
name|setUninterestingParent
argument_list|(
name|getUninterestingParent
argument_list|()
argument_list|)
expr_stmt|;
name|gml
operator|.
name|setAddLinks
argument_list|(
name|getAddLinks
argument_list|()
argument_list|)
expr_stmt|;
return|return
name|gml
operator|.
name|apply
argument_list|(
name|revision
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot get merge list"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
block|}
return|;
block|}
annotation|@
name|Override
DECL|method|related ()
specifier|public
name|RelatedChangesInfo
name|related
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|getRelated
operator|.
name|apply
argument_list|(
name|revision
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot get related changes"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|votes ()
specifier|public
name|ListMultimap
argument_list|<
name|String
argument_list|,
name|ApprovalInfo
argument_list|>
name|votes
parameter_list|()
throws|throws
name|RestApiException
block|{
name|ListMultimap
argument_list|<
name|String
argument_list|,
name|ApprovalInfo
argument_list|>
name|result
init|=
name|ListMultimapBuilder
operator|.
name|treeKeys
argument_list|()
operator|.
name|arrayListValues
argument_list|()
operator|.
name|build
argument_list|()
decl_stmt|;
try|try
block|{
name|Iterable
argument_list|<
name|PatchSetApproval
argument_list|>
name|approvals
init|=
name|approvalsUtil
operator|.
name|byPatchSet
argument_list|(
name|revision
operator|.
name|getNotes
argument_list|()
argument_list|,
name|revision
operator|.
name|getPatchSet
argument_list|()
operator|.
name|id
argument_list|()
argument_list|,
literal|null
argument_list|,
literal|null
argument_list|)
decl_stmt|;
name|AccountLoader
name|accountLoader
init|=
name|accountLoaderFactory
operator|.
name|create
argument_list|(
name|EnumSet
operator|.
name|of
argument_list|(
name|FillOptions
operator|.
name|ID
argument_list|,
name|FillOptions
operator|.
name|NAME
argument_list|,
name|FillOptions
operator|.
name|EMAIL
argument_list|,
name|FillOptions
operator|.
name|USERNAME
argument_list|)
argument_list|)
decl_stmt|;
for|for
control|(
name|PatchSetApproval
name|approval
range|:
name|approvals
control|)
block|{
name|String
name|label
init|=
name|approval
operator|.
name|label
argument_list|()
decl_stmt|;
name|ApprovalInfo
name|info
init|=
operator|new
name|ApprovalInfo
argument_list|(
name|approval
operator|.
name|accountId
argument_list|()
operator|.
name|get
argument_list|()
argument_list|,
name|Integer
operator|.
name|valueOf
argument_list|(
name|approval
operator|.
name|value
argument_list|()
argument_list|)
argument_list|,
literal|null
argument_list|,
name|approval
operator|.
name|tag
argument_list|()
operator|.
name|orElse
argument_list|(
literal|null
argument_list|)
argument_list|,
name|approval
operator|.
name|granted
argument_list|()
argument_list|)
decl_stmt|;
name|accountLoader
operator|.
name|put
argument_list|(
name|info
argument_list|)
expr_stmt|;
name|result
operator|.
name|get
argument_list|(
name|label
argument_list|)
operator|.
name|add
argument_list|(
name|info
argument_list|)
expr_stmt|;
block|}
name|accountLoader
operator|.
name|fill
argument_list|()
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot get votes"
argument_list|,
name|e
argument_list|)
throw|;
block|}
return|return
name|result
return|;
block|}
annotation|@
name|Override
DECL|method|description (String description)
specifier|public
name|void
name|description
parameter_list|(
name|String
name|description
parameter_list|)
throws|throws
name|RestApiException
block|{
name|DescriptionInput
name|in
init|=
operator|new
name|DescriptionInput
argument_list|()
decl_stmt|;
name|in
operator|.
name|description
operator|=
name|description
expr_stmt|;
try|try
block|{
name|putDescription
operator|.
name|apply
argument_list|(
name|revision
argument_list|,
name|in
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot set description"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|description ()
specifier|public
name|String
name|description
parameter_list|()
throws|throws
name|RestApiException
block|{
try|try
block|{
return|return
name|getDescription
operator|.
name|apply
argument_list|(
name|revision
argument_list|)
operator|.
name|value
argument_list|()
return|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
name|asRestApiException
argument_list|(
literal|"Cannot get description"
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
annotation|@
name|Override
DECL|method|etag ()
specifier|public
name|String
name|etag
parameter_list|()
throws|throws
name|RestApiException
block|{
return|return
name|revisionActions
operator|.
name|getETag
argument_list|(
name|revision
argument_list|)
return|;
block|}
block|}
end_class

end_unit

